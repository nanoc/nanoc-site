<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Nanoc::DataSource
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Nanoc/DataSource.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Nanoc.html" title="Nanoc (module)">Nanoc</a></span></span>
     &raquo; 
    <span class="title">DataSource</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Nanoc::DataSource
  <span class="abstract note title">Abstract</span>
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Nanoc::DataSource</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/nanoc/base/source_data/data_source.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This class is abstract.</strong>
  <div class='inline'><p>Subclasses should at least implement <span class='object_link'><a href="#items-instance_method" title="Nanoc::DataSource#items (method)">#items</a></span> and <span class='object_link'><a href="#layouts-instance_method" title="Nanoc::DataSource#layouts (method)">#layouts</a></span>.</p>
</div>
</div>
<p>Responsible for loading site data. It is the (abstract) superclass for all
data sources. Subclasses must at least implement the data reading methods
(<span class='object_link'><a href="#items-instance_method" title="Nanoc::DataSource#items (method)">#items</a></span> and <span class='object_link'><a href="#layouts-instance_method" title="Nanoc::DataSource#layouts (method)">#layouts</a></span>).</p>

<p>Apart from the methods for loading and storing data, there are the <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span>
and <span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span> methods for bringing up and tearing down the connection to the
data source. These should be overridden in subclasses. The <span class='object_link'><a href="#loading-instance_method" title="Nanoc::DataSource#loading (method)">#loading</a></span>
method wraps <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span> and <span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span>. <span class='object_link'><a href="#loading-instance_method" title="Nanoc::DataSource#loading (method)">#loading</a></span> is a convenience method for the
more low-level methods <span class='object_link'><a href="#use-instance_method" title="Nanoc::DataSource#use (method)">#use</a></span> and <span class='object_link'><a href="#unuse-instance_method" title="Nanoc::DataSource#unuse (method)">#unuse</a></span>, which respectively increment
and decrement the reference count; when the reference count goes from 0 to
1, the data source will be loaded (<span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span> will be called) and when the
reference count goes from 1 to 0, the data source will be unloaded
(<span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span> will be called).</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">- (Hash) <strong>config</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The configuration for this data source.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#items_root-instance_method" title="#items_root (instance method)">- (String) <strong>items_root</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The root path where items returned by this data source should be mounted.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#layouts_root-instance_method" title="#layouts_root (instance method)">- (String) <strong>layouts_root</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The root path where layouts returned by this data source should be mounted.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#down-instance_method" title="#down (instance method)">- (void) <strong>down</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Brings down the connection to the data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DataSource) <strong>initialize</strong>(site, items_root, layouts_root, config) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new data source for the given site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#items-instance_method" title="#items (instance method)">- (Enumerable) <strong>items</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the collection of items (represented by <span class='object_link'>Int::Item</span>) in this site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#layouts-instance_method" title="#layouts (instance method)">- (Enumerable) <strong>layouts</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the collection of layouts (represented by <span class='object_link'>Int::Layout</span>) in this site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#loading-instance_method" title="#loading (instance method)">- (void) <strong>loading</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Loads the data source when necessary (calling <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span>), yields, and unloads (using <span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span>) the data source when it is not being used elsewhere.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_item-instance_method" title="#new_item (instance method)">- (Object) <strong>new_item</strong>(raw_content_or_raw_filename, attributes, identifier, params = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new in-memory item instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_layout-instance_method" title="#new_layout (instance method)">- (Object) <strong>new_layout</strong>(raw_content, attributes, identifier) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new in-memory layout instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unuse-instance_method" title="#unuse (instance method)">- (void) <strong>unuse</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Marks the data source as unused by the caller.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#up-instance_method" title="#up (instance method)">- (void) <strong>up</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Brings up the connection to the data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#use-instance_method" title="#use (instance method)">- (void) <strong>use</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Marks the data source as used by the caller.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Nanoc::DataSource (class)">DataSource</a></span></tt>) <strong>initialize</strong>(site, items_root, layouts_root, config) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new data source for the given site.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>site</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Nanoc::Int::Site</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The site this data source belongs to.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>items_root</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The prefix that should be given to all items
returned by the #items method (comparable to mount points for
filesystems in Unix-ish OSes).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>layouts_root</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The prefix that should be given to all
layouts returned by the #layouts method (comparable to mount points
for filesystems in Unix-ish OSes).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>config</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The configuration for this data source.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49
50
51
52
53
54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_site'>site</span><span class='comma'>,</span> <span class='id identifier rubyid_items_root'>items_root</span><span class='comma'>,</span> <span class='id identifier rubyid_layouts_root'>layouts_root</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='ivar'>@site</span>         <span class='op'>=</span> <span class='id identifier rubyid_site'>site</span>
  <span class='ivar'>@items_root</span>   <span class='op'>=</span> <span class='id identifier rubyid_items_root'>items_root</span>
  <span class='ivar'>@layouts_root</span> <span class='op'>=</span> <span class='id identifier rubyid_layouts_root'>layouts_root</span>
  <span class='ivar'>@config</span>       <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='ivar'>@references</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="config-instance_method">
  
    - (<tt><span class='object_link'>Hash</span></tt>) <strong>config</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The configuration for this data source. For example,
online data sources could contain authentication details.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The configuration for this data source. For example,
online data sources could contain authentication details.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_config'>config</span>
  <span class='ivar'>@config</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="items_root-instance_method">
  
    - (<tt><span class='object_link'>String</span></tt>) <strong>items_root</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The root path where items returned by this data source
should be mounted.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The root path where items returned by this data source
should be mounted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 22</span>

<span class='kw'>def</span> <span class='id identifier rubyid_items_root'>items_root</span>
  <span class='ivar'>@items_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="layouts_root-instance_method">
  
    - (<tt><span class='object_link'>String</span></tt>) <strong>layouts_root</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The root path where layouts returned by this data
source should be mounted.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The root path where layouts returned by this data
source should be mounted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 26</span>

<span class='kw'>def</span> <span class='id identifier rubyid_layouts_root'>layouts_root</span>
  <span class='ivar'>@layouts_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="down-instance_method">
  
    - (<tt>void</tt>) <strong>down</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Brings down the connection to the data. This method should undo the
effects of the <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span> method. For example, a database connection
established in <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span> should be closed in this method.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 114</span>

<span class='kw'>def</span> <span class='id identifier rubyid_down'>down</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="items-instance_method">
  
    - (<tt>Enumerable</tt>) <strong>items</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the collection of items (represented by <span class='object_link'>Int::Item</span>) in
this site. The default implementation simply returns an empty array.</p>

<p>Subclasses should not prepend <code>items_root</code> to the item’s identifiers, as
this will be done automatically.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Enumerable</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The collection of items</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_items'>items</span>
  <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="layouts-instance_method">
  
    - (<tt>Enumerable</tt>) <strong>layouts</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the collection of layouts (represented by <span class='object_link'>Int::Layout</span>) in
this site. The default implementation simply returns an empty array.</p>

<p>Subclasses should prepend <code>layout_root</code> to the layout’s identifiers,
since this is not done automatically.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Enumerable</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The collection of layouts</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_layouts'>layouts</span>
  <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="loading-instance_method">
  
    - (<tt>void</tt>) <strong>loading</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Loads the data source when necessary (calling <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span>), yields, and
unloads (using <span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span>) the data source when it is not being used
elsewhere. All data source queries and data manipulations should be
wrapped in a <span class='object_link'><a href="#loading-instance_method" title="Nanoc::DataSource#loading (method)">#loading</a></span> block; it ensures that the data source is loaded
when necessary and makes sure the data source does not get unloaded
while it is still being used elsewhere.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_loading'>loading</span>
  <span class='id identifier rubyid_use'>use</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_unuse'>unuse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="new_item-instance_method">
  
    - (<tt>Object</tt>) <strong>new_item</strong>(raw_content_or_raw_filename, attributes, identifier, params = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new in-memory item instance. This is intended for use within
the <span class='object_link'><a href="#items-instance_method" title="Nanoc::DataSource#items (method)">#items</a></span> method.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>raw_content_or_raw_filename</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The uncompiled item content
(if it is a textual item) or the path to the filename containing the
content (if it is a binary item).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash containing this item’s attributes.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>identifier</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>This item’s identifier.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Extra parameters.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>params</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:binary</span>
          <span class="type">(<tt>Symbol</tt>, <tt>nil</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>Whether or not this item is
binary</p>
</div>
          
        </li>
      
    </ul>
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new_item'>new_item</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_content_or_raw_filename'>raw_content_or_raw_filename</span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_identifier'>identifier</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Int</span><span class='op'>::</span><span class='const'>Item</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_content_or_raw_filename'>raw_content_or_raw_filename</span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_identifier'>identifier</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="new_layout-instance_method">
  
    - (<tt>Object</tt>) <strong>new_layout</strong>(raw_content, attributes, identifier) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new in-memory layout instance. This is intended for use within
the <span class='object_link'><a href="#layouts-instance_method" title="Nanoc::DataSource#layouts (method)">#layouts</a></span> method.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>raw_content</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The raw content of this layout.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash containing this layout’s attributes.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>identifier</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>This layout’s identifier.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new_layout'>new_layout</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_content'>raw_content</span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_identifier'>identifier</span><span class='rparen'>)</span>
  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Int</span><span class='op'>::</span><span class='const'>Layout</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_content'>raw_content</span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_identifier'>identifier</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unuse-instance_method">
  
    - (<tt>void</tt>) <strong>unuse</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Marks the data source as unused by the caller.</p>

<p>Calling this method decreases the internal reference count. When the
reference count reaches zero, i.e. when the data source is not used any
more, the data source will be unloaded (<span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span> will be called).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 90</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unuse'>unuse</span>
  <span class='ivar'>@references</span> <span class='op'>-=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_down'>down</span> <span class='kw'>if</span> <span class='ivar'>@references</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="up-instance_method">
  
    - (<tt>void</tt>) <strong>up</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Brings up the connection to the data. Depending on the way data is
stored, this may not be necessary. This is the ideal place to connect to
the database, for example.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 103</span>

<span class='kw'>def</span> <span class='id identifier rubyid_up'>up</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="use-instance_method">
  
    - (<tt>void</tt>) <strong>use</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Marks the data source as used by the caller.</p>

<p>Calling this method increases the internal reference count. When the
data source is used for the first time (first <span class='object_link'><a href="#use-instance_method" title="Nanoc::DataSource#use (method)">#use</a></span> call), the data
source will be loaded (<span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span> will be called).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80
81</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 78</span>

<span class='kw'>def</span> <span class='id identifier rubyid_use'>use</span>
  <span class='id identifier rubyid_up'>up</span> <span class='kw'>if</span> <span class='ivar'>@references</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='ivar'>@references</span> <span class='op'>+=</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    
<script type="text/javascript">
    var _gaq = _gaq || [];
    var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-15639968-1']);
    _gaq.push(['_setDomainName', 'nanoc.ws']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
     })();
</script>

  </body>
</html>