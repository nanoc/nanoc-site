<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Nanoc::Helpers::Rendering
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!Nanoc/Helpers/Rendering.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Nanoc.html" title="Nanoc (module)">Nanoc</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Helpers.html" title="Nanoc::Helpers (module)">Helpers</a></span></span>
     &raquo; 
    <span class="title">Rendering</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Nanoc::Helpers::Rendering
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1"><span class='object_link'><a href="Capturing.html" title="Nanoc::Helpers::Capturing (module)">Capturing</a></span></dd>
      
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/nanoc/helpers/rendering.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Provides functionality for rendering layouts as partials.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#render-instance_method" title="#render (instance method)">- (String<sup>?</sup>) <strong>render</strong>(identifier, other_assigns = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Renders the given layout.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Capturing.html" title="Nanoc::Helpers::Capturing (module)">Capturing</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Capturing.html#capture-instance_method" title="Nanoc::Helpers::Capturing#capture (method)">#capture</a></span>, <span class='object_link'><a href="Capturing.html#content_for-instance_method" title="Nanoc::Helpers::Capturing#content_for (method)">#content_for</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="render-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt><sup>?</sup>) <strong>render</strong>(identifier, other_assigns = {}, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Renders the given layout. The given layout will be run through the first
matching layout rule.</p>

<p>When this method is invoked <em>without</em> a block, the return value will be
the rendered layout (a string)  and <code>_erbout</code> will not be modified.</p>

<p>When this method is invoked <em>with</em> a block, an empty string will be
returned and the rendered content will be appended to <code>_erbout</code>. In this
case, the content of the block will be captured (using the
<span class='object_link'><a href="Capturing.html" title="Nanoc::Helpers::Capturing (module)">Capturing</a></span> helper) and this content will be made
available with <code>yield</code>. In other words, a <code>yield</code> inside the partial
will output the content of the block passed to the method.</p>

<p>(For the curious: the reason why <span class='object_link'><a href="#render-instance_method" title="Nanoc::Helpers::Rendering#render (method)">#render</a></span> with a block has this
behaviour of returning an empty string and modifying <code>_erbout</code> is
because ERB does not support combining the <code>&lt;%= ... %&gt;</code> form with a
method call that takes a block.)</p>

<p>The assigns (<code>@item</code>, <code>@config</code>, â€¦) will be available in the partial. It
is also possible to pass custom assigns to the method; these assigns
will be made available as instance variables inside the partial.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Rendering a head and a foot partial around some text</p>
</div></p>
      
      <pre class="example code"><code>
&lt;%= render &#39;head&#39; %&gt; - MIDDLE - &lt;%= render &#39;foot&#39; %&gt;
# =&gt; &quot;HEAD - MIDDLE - FOOT&quot;</code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Rendering a head partial with a custom title</p>
</div></p>
      
      <pre class="example code"><code>
# The &#39;head&#39; layout
&lt;h1&gt;&lt;%= @title %&gt;&lt;/h1&gt;

# The item/layout where the partial is rendered
&lt;%= render &#39;head&#39;, :title =&gt; &#39;Foo&#39; %&gt;
# =&gt; &quot;&lt;h1&gt;Foo&lt;/h1&gt;&quot;</code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Yielding inside a partial</p>
</div></p>
      
      <pre class="example code"><code>
# The &#39;box&#39; partial
&lt;div class=&quot;box&quot;&gt;
  &lt;%= yield %&gt;
&lt;/div&gt;

# The item/layout where the partial is rendered
&lt;% render &#39;box&#39; do %&gt;
  I&#39;m boxy! Luvz!
&lt;% end %&gt;

# Result
&lt;div class=&quot;box&quot;&gt;
  I&#39;m boxy! Luvz!
&lt;/div&gt;</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>identifier</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The identifier of the layout that should be
rendered</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>other_assigns</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A hash containing extra assigns that will be
made available as instance variables in the partial</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The rendered partial, or nil if this method was
invoked with a block</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Errors/UnknownLayout.html" title="Nanoc::Errors::UnknownLayout (class)">Nanoc::Errors::UnknownLayout</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the given layout does not
exist</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Errors/CannotDetermineFilter.html" title="Nanoc::Errors::CannotDetermineFilter (class)">Nanoc::Errors::CannotDetermineFilter</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if there is no layout
rule for the given layout</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Errors/UnknownFilter.html" title="Nanoc::Errors::UnknownFilter (class)">Nanoc::Errors::UnknownFilter</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the layout rule for the given
layout specifies an unknown filter</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/helpers/rendering.rb', line 78</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render'>render</span><span class='lparen'>(</span><span class='id identifier rubyid_identifier'>identifier</span><span class='comma'>,</span> <span class='id identifier rubyid_other_assigns'>other_assigns</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='comment'># Find layout
</span>  <span class='id identifier rubyid_layout'>layout</span> <span class='op'>=</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_layouts'>layouts</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_l'>l</span><span class='op'>|</span> <span class='id identifier rubyid_l'>l</span><span class='period'>.</span><span class='id identifier rubyid_identifier'>identifier</span> <span class='op'>==</span> <span class='id identifier rubyid_identifier'>identifier</span><span class='period'>.</span><span class='id identifier rubyid_cleaned_identifier'>cleaned_identifier</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Errors</span><span class='op'>::</span><span class='const'>UnknownLayout</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_identifier'>identifier</span><span class='period'>.</span><span class='id identifier rubyid_cleaned_identifier'>cleaned_identifier</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_layout'>layout</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='comment'># Visit
</span>  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='symbol'>:visit_started</span><span class='comma'>,</span> <span class='id identifier rubyid_layout'>layout</span><span class='rparen'>)</span>
  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='symbol'>:visit_ended</span><span class='comma'>,</span>   <span class='id identifier rubyid_layout'>layout</span><span class='rparen'>)</span>

  <span class='comment'># Capture content, if any
</span>  <span class='id identifier rubyid_captured_content'>captured_content</span> <span class='op'>=</span> <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>?</span> <span class='id identifier rubyid_capture'>capture</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='kw'>nil</span>

  <span class='comment'># Get assigns
</span>  <span class='id identifier rubyid_assigns'>assigns</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>content:</span> <span class='id identifier rubyid_captured_content'>captured_content</span><span class='comma'>,</span>
    <span class='label'>item:</span> <span class='ivar'>@item</span><span class='comma'>,</span>
    <span class='label'>item_rep:</span> <span class='ivar'>@item_rep</span><span class='comma'>,</span>
    <span class='label'>items:</span> <span class='ivar'>@items</span><span class='comma'>,</span>
    <span class='label'>layout:</span> <span class='id identifier rubyid_layout'>layout</span><span class='comma'>,</span>
    <span class='label'>layouts:</span> <span class='ivar'>@layouts</span><span class='comma'>,</span>
    <span class='label'>config:</span> <span class='ivar'>@config</span><span class='comma'>,</span>
    <span class='label'>site:</span> <span class='ivar'>@site</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_other_assigns'>other_assigns</span><span class='rparen'>)</span>

  <span class='comment'># Get filter name
</span>  <span class='id identifier rubyid_filter_name'>filter_name</span><span class='comma'>,</span> <span class='id identifier rubyid_filter_args'>filter_args</span> <span class='op'>=</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_rules_collection'>rules_collection</span><span class='period'>.</span><span class='id identifier rubyid_filter_for_layout'>filter_for_layout</span><span class='lparen'>(</span><span class='id identifier rubyid_layout'>layout</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Errors</span><span class='op'>::</span><span class='const'>CannotDetermineFilter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_layout'>layout</span><span class='period'>.</span><span class='id identifier rubyid_identifier'>identifier</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_filter_name'>filter_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='comment'># Get filter class
</span>  <span class='id identifier rubyid_filter_class'>filter_class</span> <span class='op'>=</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Filter</span><span class='period'>.</span><span class='id identifier rubyid_named'>named</span><span class='lparen'>(</span><span class='id identifier rubyid_filter_name'>filter_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Errors</span><span class='op'>::</span><span class='const'>UnknownFilter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_filter_name'>filter_name</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_filter_class'>filter_class</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='comment'># Create filter
</span>  <span class='id identifier rubyid_filter'>filter</span> <span class='op'>=</span> <span class='id identifier rubyid_filter_class'>filter_class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_assigns'>assigns</span><span class='rparen'>)</span>

  <span class='kw'>begin</span>
    <span class='comment'># Notify start
</span>    <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='symbol'>:processing_started</span><span class='comma'>,</span> <span class='id identifier rubyid_layout'>layout</span><span class='rparen'>)</span>

    <span class='comment'># Layout
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_filter'>filter</span><span class='period'>.</span><span class='id identifier rubyid_setup_and_run'>setup_and_run</span><span class='lparen'>(</span><span class='id identifier rubyid_layout'>layout</span><span class='period'>.</span><span class='id identifier rubyid_raw_content'>raw_content</span><span class='comma'>,</span> <span class='id identifier rubyid_filter_args'>filter_args</span><span class='rparen'>)</span>

    <span class='comment'># Append to erbout if we have a block
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
      <span class='comment'># Append result and return nothing
</span>      <span class='id identifier rubyid_erbout'>erbout</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_binding'>binding</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_erbout'>erbout</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_result'>result</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>else</span>
      <span class='comment'># Return result
</span>      <span class='id identifier rubyid_result'>result</span>
    <span class='kw'>end</span>
  <span class='kw'>ensure</span>
    <span class='comment'># Notify end
</span>    <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='symbol'>:processing_ended</span><span class='comma'>,</span> <span class='id identifier rubyid_layout'>layout</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    
<script type="text/javascript">
    var _gaq = _gaq || [];
    var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-15639968-1']);
    _gaq.push(['_setDomainName', 'nanoc.ws']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
     })();
</script>

  </body>
</html>