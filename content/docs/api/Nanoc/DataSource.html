<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Nanoc::DataSource
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Nanoc/DataSource.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Nanoc.html" title="Nanoc (module)">Nanoc</a></span></span>
     &raquo; 
    <span class="title">DataSource</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Nanoc::DataSource
  <span class="abstract note title">Abstract</span>
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Nanoc::DataSource</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extended by:</dt>
      <dd class="r2"><span class='object_link'><a href="PluginRegistry/PluginMethods.html" title="Nanoc::PluginRegistry::PluginMethods (module)">PluginRegistry::PluginMethods</a></span></dd>
      
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/nanoc/base/source_data/data_source.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This class is abstract.</strong>
  <div class='inline'><p>Subclasses should at least implement <span class='object_link'><a href="#items-instance_method" title="Nanoc::DataSource#items (method)">#items</a></span> and <span class='object_link'><a href="#layouts-instance_method" title="Nanoc::DataSource#layouts (method)">#layouts</a></span>. If
the data source should support creating items and layouts using the
<code>create_item</code> and <code>create_layout</code> CLI commands, the <span class='object_link'><a href="#setup-instance_method" title="Nanoc::DataSource#setup (method)">#setup</a></span>,
<span class='object_link'><a href="#create_item-instance_method" title="Nanoc::DataSource#create_item (method)">#create_item</a></span> and <span class='object_link'><a href="#create_layout-instance_method" title="Nanoc::DataSource#create_layout (method)">#create_layout</a></span> methods should be implemented as
well.</p>
</div>
</div>
<p>Responsible for loading site data. It is the (abstract) superclass for all
data sources. Subclasses must at least implement the data reading methods
(<span class='object_link'><a href="#items-instance_method" title="Nanoc::DataSource#items (method)">#items</a></span> and <span class='object_link'><a href="#layouts-instance_method" title="Nanoc::DataSource#layouts (method)">#layouts</a></span>); all other methods involving data manipulation
are optional.</p>

<p>Apart from the methods for loading and storing data, there are the <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span>
and <span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span> methods for bringing up and tearing down the connection to the
data source. These should be overridden in subclasses. The <span class='object_link'><a href="#loading-instance_method" title="Nanoc::DataSource#loading (method)">#loading</a></span>
method wraps <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span> and <span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span>. <span class='object_link'><a href="#loading-instance_method" title="Nanoc::DataSource#loading (method)">#loading</a></span> is a convenience method for the
more low-level methods <span class='object_link'><a href="#use-instance_method" title="Nanoc::DataSource#use (method)">#use</a></span> and <span class='object_link'><a href="#unuse-instance_method" title="Nanoc::DataSource#unuse (method)">#unuse</a></span>, which respectively increment
and decrement the reference count; when the reference count goes from 0 to
1, the data source will be loaded (<span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span> will be called) and when the
reference count goes from 1 to 0, the data source will be unloaded
(<span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span> will be called).</p>

<p>The <span class='object_link'><a href="#setup-instance_method" title="Nanoc::DataSource#setup (method)">#setup</a></span> method is used for setting up a siteâ€™s data source for the
first time.</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="DataSources/Delicious.html" title="Nanoc::DataSources::Delicious (class)">Nanoc::DataSources::Delicious</a></span>, <span class='object_link'><a href="DataSources/FilesystemUnified.html" title="Nanoc::DataSources::FilesystemUnified (class)">Nanoc::DataSources::FilesystemUnified</a></span>, <span class='object_link'><a href="DataSources/FilesystemVerbose.html" title="Nanoc::DataSources::FilesystemVerbose (class)">Nanoc::DataSources::FilesystemVerbose</a></span>, <span class='object_link'><a href="DataSources/LastFM.html" title="Nanoc::DataSources::LastFM (class)">Nanoc::DataSources::LastFM</a></span>, <span class='object_link'><a href="DataSources/Static.html" title="Nanoc::DataSources::Static (class)">Nanoc::DataSources::Static</a></span>, <span class='object_link'><a href="DataSources/Twitter.html" title="Nanoc::DataSources::Twitter (class)">Nanoc::DataSources::Twitter</a></span></p>
</div>




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">- (Hash) <strong>config</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The configuration for this data source.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#items_root-instance_method" title="#items_root (instance method)">- (String) <strong>items_root</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The root path where items returned by this data source should be mounted.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#layouts_root-instance_method" title="#layouts_root (instance method)">- (String) <strong>layouts_root</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The root path where layouts returned by this data source should be mounted.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_item-instance_method" title="#create_item (instance method)">- (void) <strong>create_item</strong>(content, attributes, identifier, params = {}) </a>
    

    
  </span>
  
  
  
  
  <span class="abstract note title">abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new item with the given content, attributes and identifier.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_layout-instance_method" title="#create_layout (instance method)">- (void) <strong>create_layout</strong>(content, attributes, identifier, params = {}) </a>
    

    
  </span>
  
  
  
  
  <span class="abstract note title">abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new layout with the given content, attributes and identifier.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#down-instance_method" title="#down (instance method)">- (void) <strong>down</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Brings down the connection to the data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DataSource) <strong>initialize</strong>(site, items_root, layouts_root, config) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new data source for the given site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#items-instance_method" title="#items (instance method)">- (Array&lt;Nanoc::Item&gt;) <strong>items</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of items (represented by <span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Item</a></span>) in this site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#layouts-instance_method" title="#layouts (instance method)">- (Array&lt;Nanoc::Layout&gt;) <strong>layouts</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of layouts (represented by <span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Layout</a></span>) in this site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#loading-instance_method" title="#loading (instance method)">- (void) <strong>loading</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Loads the data source when necessary (calling <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span>), yields, and unloads (using <span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span>) the data source when it is not being used elsewhere.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup-instance_method" title="#setup (instance method)">- (void) <strong>setup</strong> </a>
    

    
  </span>
  
  
  
  
  <span class="abstract note title">abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates the bare minimum essentials for this data source to work.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sync-instance_method" title="#sync (instance method)">- (void) <strong>sync</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sync the content for this data source with an external source.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unuse-instance_method" title="#unuse (instance method)">- (void) <strong>unuse</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Marks the data source as unused by the caller.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#up-instance_method" title="#up (instance method)">- (void) <strong>up</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Brings up the connection to the data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">- (void) <strong>update</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updated the content stored in this site to a newer version.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#use-instance_method" title="#use (instance method)">- (void) <strong>use</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Marks the data source as used by the caller.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="PluginRegistry/PluginMethods.html" title="Nanoc::PluginRegistry::PluginMethods (module)">PluginRegistry::PluginMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="PluginRegistry/PluginMethods.html#all-instance_method" title="Nanoc::PluginRegistry::PluginMethods#all (method)">all</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#identifier-instance_method" title="Nanoc::PluginRegistry::PluginMethods#identifier (method)">identifier</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#identifiers-instance_method" title="Nanoc::PluginRegistry::PluginMethods#identifiers (method)">identifiers</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#named-instance_method" title="Nanoc::PluginRegistry::PluginMethods#named (method)">named</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#register-instance_method" title="Nanoc::PluginRegistry::PluginMethods#register (method)">register</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Nanoc::DataSource (class)">DataSource</a></span></tt>) <strong>initialize</strong>(site, items_root, layouts_root, config) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new data source for the given site.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>site</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Site.html" title="Nanoc::Site (class)">Nanoc::Site</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The site this data source belongs to.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>items_root</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The prefix that should be given to all items
returned by the #items method (comparable to mount points for
filesystems in Unix-ish OSes).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>layouts_root</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The prefix that should be given to all
layouts returned by the #layouts method (comparable to mount points
for filesystems in Unix-ish OSes).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>config</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The configuration for this data source.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_site'>site</span><span class='comma'>,</span> <span class='id identifier rubyid_items_root'>items_root</span><span class='comma'>,</span> <span class='id identifier rubyid_layouts_root'>layouts_root</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='ivar'>@site</span>         <span class='op'>=</span> <span class='id identifier rubyid_site'>site</span>
  <span class='ivar'>@items_root</span>   <span class='op'>=</span> <span class='id identifier rubyid_items_root'>items_root</span>
  <span class='ivar'>@layouts_root</span> <span class='op'>=</span> <span class='id identifier rubyid_layouts_root'>layouts_root</span>
  <span class='ivar'>@config</span>       <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>

  <span class='ivar'>@references</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="config-instance_method">
  
    - (<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>) <strong>config</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The configuration for this data source. For example,
online data sources could contain authentication details.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The configuration for this data source. For example,
online data sources could contain authentication details.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_config'>config</span>
  <span class='ivar'>@config</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="items_root-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>items_root</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The root path where items returned by this data source
should be mounted.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The root path where items returned by this data source
should be mounted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_items_root'>items_root</span>
  <span class='ivar'>@items_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="layouts_root-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>layouts_root</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The root path where layouts returned by this data
source should be mounted.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The root path where layouts returned by this data
source should be mounted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_layouts_root'>layouts_root</span>
  <span class='ivar'>@layouts_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create_item-instance_method">
  
    - (<tt>void</tt>) <strong>create_item</strong>(content, attributes, identifier, params = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong>
  <div class='inline'>
</div>
</div>
<p class="note returns_void">This method returns an undefined value.</p><p>Creates a new item with the given content, attributes and identifier. No
instance of <span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Item</a></span> will be created; this method creates the item
in the data source so that it can be loaded and turned into a
<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Item</a></span> instance by the <span class='object_link'><a href="#items-instance_method" title="Nanoc::DataSource#items (method)">#items</a></span> method.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>identifier</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Extra parameters to give to the data source. This
can be used to influence the way items are stored. For example,
filesystem data sources could use this to pass the extension of the
files that should be generated.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 210</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_item'>create_item</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_identifier'>identifier</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_not_implemented'>not_implemented</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>create_item</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_layout-instance_method">
  
    - (<tt>void</tt>) <strong>create_layout</strong>(content, attributes, identifier, params = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong>
  <div class='inline'>
</div>
</div>
<p class="note returns_void">This method returns an undefined value.</p><p>Creates a new layout with the given content, attributes and identifier.
No instance of <span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Layout</a></span> will be created; this method creates the
layout in the data source so that it can be loaded and turned into a
<span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Layout</a></span> instance by the <span class='object_link'><a href="#layouts-instance_method" title="Nanoc::DataSource#layouts (method)">#layouts</a></span> method.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>identifier</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Extra parameters to give to the data source. This
can be used to influence the way items are stored. For example,
filesystem data sources could use this to pass the extension of the
files that should be generated.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 233</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_layout'>create_layout</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='comma'>,</span> <span class='id identifier rubyid_identifier'>identifier</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_not_implemented'>not_implemented</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>create_layout</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="down-instance_method">
  
    - (<tt>void</tt>) <strong>down</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Brings down the connection to the data. This method should undo the
effects of the <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span> method. For example, a database connection
established in <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span> should be closed in this method.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 124</span>

<span class='kw'>def</span> <span class='id identifier rubyid_down'>down</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="items-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span>&gt;</tt>) <strong>items</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the list of items (represented by <span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Item</a></span>) in this site.
The default implementation simply returns an empty array.</p>

<p>Subclasses should not prepend <code>items_root</code> to the itemâ€™s identifiers, as
this will be done automatically.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of items</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 173</span>

<span class='kw'>def</span> <span class='id identifier rubyid_items'>items</span>
  <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="layouts-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span>&gt;</tt>) <strong>layouts</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the list of layouts (represented by <span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Layout</a></span>) in this
site. The default implementation simply returns an empty array.</p>

<p>Subclasses should prepend <code>layout_root</code> to the layoutâ€™s identifiers,
since this is not done automatically.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of layouts</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 187</span>

<span class='kw'>def</span> <span class='id identifier rubyid_layouts'>layouts</span>
  <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="loading-instance_method">
  
    - (<tt>void</tt>) <strong>loading</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Loads the data source when necessary (calling <span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span>), yields, and
unloads (using <span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span>) the data source when it is not being used
elsewhere. All data source queries and data manipulations should be
wrapped in a <span class='object_link'><a href="#loading-instance_method" title="Nanoc::DataSource#loading (method)">#loading</a></span> block; it ensures that the data source is loaded
when necessary and makes sure the data source does not get unloaded
while it is still being used elsewhere.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 74</span>

<span class='kw'>def</span> <span class='id identifier rubyid_loading'>loading</span>
  <span class='id identifier rubyid_use'>use</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_unuse'>unuse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup-instance_method">
  
    - (<tt>void</tt>) <strong>setup</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong>
  <div class='inline'>
</div>
</div>
<p class="note returns_void">This method returns an undefined value.</p><p>Creates the bare minimum essentials for this data source to work. This
action will likely be destructive. This method should not create sample
data such as a default home page, a default layout, etc. For example,
when using a database, this is where you should create the necessary
tables for the data source to function properly.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 136</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup'>setup</span>
  <span class='id identifier rubyid_not_implemented'>not_implemented</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>setup</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sync-instance_method">
  
    - (<tt>void</tt>) <strong>sync</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Sync the content for this data source with an external source.
This method is called by the <code>nanoc sync</code> command so that data sources may
update local caches of external data, such as items fetched from
third-party APIs.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sync'>sync</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unuse-instance_method">
  
    - (<tt>void</tt>) <strong>unuse</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Marks the data source as unused by the caller.</p>

<p>Calling this method decreases the internal reference count. When the
reference count reaches zero, i.e. when the data source is not used any
more, the data source will be unloaded (<span class='object_link'><a href="#down-instance_method" title="Nanoc::DataSource#down (method)">#down</a></span> will be called).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unuse'>unuse</span>
  <span class='ivar'>@references</span> <span class='op'>-=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_down'>down</span> <span class='kw'>if</span> <span class='ivar'>@references</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="up-instance_method">
  
    - (<tt>void</tt>) <strong>up</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Brings up the connection to the data. Depending on the way data is
stored, this may not be necessary. This is the ideal place to connect to
the database, for example.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 113</span>

<span class='kw'>def</span> <span class='id identifier rubyid_up'>up</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update-instance_method">
  
    - (<tt>void</tt>) <strong>update</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Updated the content stored in this site to a newer version. A newer
version of a data source may store content in a different format, and
this method will update the stored content to this newer format.</p>

<p>Subclasses may override this method, but are not required to do so; the
default implementation simply does nothing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 148</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="use-instance_method">
  
    - (<tt>void</tt>) <strong>use</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Marks the data source as used by the caller.</p>

<p>Calling this method increases the internal reference count. When the
data source is used for the first time (first <span class='object_link'><a href="#use-instance_method" title="Nanoc::DataSource#use (method)">#use</a></span> call), the data
source will be loaded (<span class='object_link'><a href="#up-instance_method" title="Nanoc::DataSource#up (method)">#up</a></span> will be called).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/source_data/data_source.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_use'>use</span>
  <span class='id identifier rubyid_up'>up</span> <span class='kw'>if</span> <span class='ivar'>@references</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='ivar'>@references</span> <span class='op'>+=</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    
<script type="text/javascript">
    var _gaq = _gaq || [];
    var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-15639968-1']);
    _gaq.push(['_setDomainName', 'nanoc.ws']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
     })();
</script>

  </body>
</html>