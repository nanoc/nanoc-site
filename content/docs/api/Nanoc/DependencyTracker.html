<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Nanoc::DependencyTracker
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Nanoc/DependencyTracker.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Nanoc.html" title="Nanoc (module)">Nanoc</a></span></span>
     &raquo; 
    <span class="title">DependencyTracker</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Nanoc::DependencyTracker
  
  
  <span class="private note title">Private</span>
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Store.html" title="Nanoc::Store (class)">Store</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="Store.html" title="Nanoc::Store (class)">Store</a></span></li>
          
            <li class="next">Nanoc::DependencyTracker</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/nanoc/base/compilation/dependency_tracker.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This class is part of a private API.</strong>
  You should avoid using this class if possible, as it may be removed or be changed in the future.
</p>
<p>Responsible for remembering dependencies between items and layouts. It is
used to speed up compilation by only letting an item be recompiled when it
is outdated or any of its dependencies (or dependencies’ dependencies,
etc) is outdated.</p>

<p>The dependencies tracked by the dependency tracker are not dependencies
based on an item’s or a layout’s content. When one object uses an
attribute of another object, then this is also treated as a dependency.
While dependencies based on an item’s or layout’s content (handled in
<span class='object_link'><a href="Compiler.html" title="Nanoc::Compiler (class)">Compiler</a></span>) cannot be mutually recursive, the more general
dependencies in Nanoc::DependencyTracker can (e.g. item A can use an
attribute of item B and vice versa without problems).</p>

<p>The dependency tracker remembers the dependency information between runs.
Dependency information is stored in the <code>tmp/dependencies</code> file.</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#compiler-instance_method" title="#compiler (instance method)">- (Nanoc::Compiler) <strong>compiler</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>The compiler that corresponds to this dependency tracker.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#objects-instance_method" title="#objects (instance method)">- (Array&lt;Nanoc::Item, Nanoc::Layout&gt;) <strong>objects</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>The list of items and layouts that are being tracked by the dependency tracker.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="Store.html" title="Nanoc::Store (class)">Store</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Store.html#filename-instance_method" title="Nanoc::Store#filename (method)">#filename</a></span>, <span class='object_link'><a href="Store.html#version-instance_method" title="Nanoc::Store#version (method)">#version</a></span></p>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#forget_dependencies_for-instance_method" title="#forget_dependencies_for (instance method)">- (void) <strong>forget_dependencies_for</strong>(object) </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Empties the list of dependencies for the given object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DependencyTracker) <strong>initialize</strong>(objects) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Creates a new dependency tracker for the given items and layouts.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#load_graph-instance_method" title="#load_graph (instance method)">- (Object) <strong>load_graph</strong> </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  <span class="private note title">private</span>

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>Use <span class='object_link'><a href="Store.html#load-instance_method" title="Nanoc::Store#load (method)">Store#load</a></span> instead</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#objects_causing_outdatedness_of-instance_method" title="#objects_causing_outdatedness_of (instance method)">- (Array&lt;Nanoc::Item, Nanoc::Layout, nil&gt;) <strong>objects_causing_outdatedness_of</strong>(object) </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Returns the direct dependencies for the given object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#objects_outdated_due_to-instance_method" title="#objects_outdated_due_to (instance method)">- (Array&lt;Nanoc::Item, Nanoc::Layout&gt;) <strong>objects_outdated_due_to</strong>(object) </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Returns the direct inverse dependencies for the given object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#record_dependency-instance_method" title="#record_dependency (instance method)">- (void) <strong>record_dependency</strong>(src, dst) </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Records a dependency from <code>src</code> to <code>dst</code> in the dependency graph.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-instance_method" title="#start (instance method)">- (void) <strong>start</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Starts listening for dependency messages (<code>:visit_started</code> and <code>:visit_ended</code>) and start recording dependencies.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop-instance_method" title="#stop (instance method)">- (void) <strong>stop</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Stop listening for dependency messages and stop recording dependencies.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#store_graph-instance_method" title="#store_graph (instance method)">- (Object) <strong>store_graph</strong> </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  <span class="private note title">private</span>

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>Use <span class='object_link'><a href="Store.html#store-instance_method" title="Nanoc::Store#store (method)">Store#store</a></span> instead</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#top-instance_method" title="#top (instance method)">- (Object) <strong>top</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>The topmost item on the stack, i.e.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unload-instance_method" title="#unload (instance method)">- (Object) <strong>unload</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Store.html" title="Nanoc::Store (class)">Store</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Store.html#load-instance_method" title="Nanoc::Store#load (method)">#load</a></span>, <span class='object_link'><a href="Store.html#no_data_found-instance_method" title="Nanoc::Store#no_data_found (method)">#no_data_found</a></span>, <span class='object_link'><a href="Store.html#store-instance_method" title="Nanoc::Store#store (method)">#store</a></span>, <span class='object_link'><a href="Store.html#version_mismatch_detected-instance_method" title="Nanoc::Store#version_mismatch_detected (method)">#version_mismatch_detected</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Nanoc::DependencyTracker (class)">DependencyTracker</a></span></tt>) <strong>initialize</strong>(objects) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Creates a new dependency tracker for the given items and layouts.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>objects</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span>, <span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The list of items
and layouts whose dependencies should be managed</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_objects'>objects</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tmp/dependencies</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>4</span><span class='rparen'>)</span>

  <span class='ivar'>@objects</span> <span class='op'>=</span> <span class='id identifier rubyid_objects'>objects</span>
  <span class='ivar'>@graph</span>   <span class='op'>=</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>DirectedGraph</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span> <span class='kw'>nil</span> <span class='rbracket'>]</span> <span class='op'>+</span> <span class='ivar'>@objects</span><span class='rparen'>)</span>
  <span class='ivar'>@stack</span>   <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="compiler=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="compiler-instance_method">
  
    - (<tt><span class='object_link'><a href="Compiler.html" title="Nanoc::Compiler (class)">Nanoc::Compiler</a></span></tt>) <strong>compiler</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns The compiler that corresponds to this
dependency tracker</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Compiler.html" title="Nanoc::Compiler (class)">Nanoc::Compiler</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The compiler that corresponds to this
dependency tracker</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_compiler'>compiler</span>
  <span class='ivar'>@compiler</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="objects-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span>, <span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span>&gt;</tt>) <strong>objects</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns The list of items and
layouts that are being tracked by the dependency tracker</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span>, <span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The list of items and
layouts that are being tracked by the dependency tracker</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 26</span>

<span class='kw'>def</span> <span class='id identifier rubyid_objects'>objects</span>
  <span class='ivar'>@objects</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="forget_dependencies_for-instance_method">
  
    - (<tt>void</tt>) <strong>forget_dependencies_for</strong>(object) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Empties the list of dependencies for the given object. This is necessary
before recompiling the given object, because otherwise old dependencies
will stick around and new dependencies will appear twice. This function
removes all incoming edges for the given vertex.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>object</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span></tt>, <tt><span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The object for which to
forget all dependencies</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 156</span>

<span class='kw'>def</span> <span class='id identifier rubyid_forget_dependencies_for'>forget_dependencies_for</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='ivar'>@graph</span><span class='period'>.</span><span class='id identifier rubyid_delete_edges_to'>delete_edges_to</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_graph-instance_method">
  
    - (<tt>Object</tt>) <strong>load_graph</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>Use <span class='object_link'><a href="Store.html#load-instance_method" title="Nanoc::Store#load (method)">Store#load</a></span> instead</p>
</div></div>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 166</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_graph'>load_graph</span>
  <span class='id identifier rubyid_load'>load</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="objects_causing_outdatedness_of-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span>, <span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span>, nil&gt;</tt>) <strong>objects_causing_outdatedness_of</strong>(object) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns the direct dependencies for the given object.</p>

<p>The direct dependencies of the given object include the items and
layouts that, when outdated will cause the given object to be marked as
outdated. Indirect dependencies will not be returned (e.g. if A depends
on B which depends on C, then the direct dependencies of A do not
include C).</p>

<p>The direct predecessors can include nil, which indicates an item that is
no longer present in the site.</p>

<p>predecessors of
  the given object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>object</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span></tt>, <tt><span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The object for
which to fetch the direct predecessors</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span>, <span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span>, nil&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The direct</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_objects_causing_outdatedness_of'>objects_causing_outdatedness_of</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='ivar'>@graph</span><span class='period'>.</span><span class='id identifier rubyid_direct_predecessors_of'>direct_predecessors_of</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="objects_outdated_due_to-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span>, <span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span>&gt;</tt>) <strong>objects_outdated_due_to</strong>(object) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns the direct inverse dependencies for the given object.</p>

<p>The direct inverse dependencies of the given object include the objects
that will be marked as outdated when the given object is outdated.
Indirect dependencies will not be returned (e.g. if A depends on B which
depends on C, then the direct inverse dependencies of C do not include
A).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>object</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span></tt>, <tt><span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The object for which to
fetch the direct successors</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span>, <span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The direct successors of
the given object</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_objects_outdated_due_to'>objects_outdated_due_to</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='ivar'>@graph</span><span class='period'>.</span><span class='id identifier rubyid_direct_successors_of'>direct_successors_of</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="record_dependency-instance_method">
  
    - (<tt>void</tt>) <strong>record_dependency</strong>(src, dst) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Records a dependency from <code>src</code> to <code>dst</code> in the dependency graph. When
<code>dst</code> is oudated, <code>src</code> will also become outdated.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>src</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span></tt>, <tt><span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The source of the dependency,
i.e. the object that will become outdated if dst is outdated</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dst</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span></tt>, <tt><span class='object_link'><a href="Layout.html" title="Nanoc::Layout (class)">Nanoc::Layout</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The destination of the
dependency, i.e. the object that will cause the source to become
outdated if the destination is outdated</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


140
141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 140</span>

<span class='kw'>def</span> <span class='id identifier rubyid_record_dependency'>record_dependency</span><span class='lparen'>(</span><span class='id identifier rubyid_src'>src</span><span class='comma'>,</span> <span class='id identifier rubyid_dst'>dst</span><span class='rparen'>)</span>
  <span class='comment'># Warning! dst and src are *reversed* here!
</span>  <span class='ivar'>@graph</span><span class='period'>.</span><span class='id identifier rubyid_add_edge'>add_edge</span><span class='lparen'>(</span><span class='id identifier rubyid_dst'>dst</span><span class='comma'>,</span> <span class='id identifier rubyid_src'>src</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_src'>src</span> <span class='op'>==</span> <span class='id identifier rubyid_dst'>dst</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start-instance_method">
  
    - (<tt>void</tt>) <strong>start</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Starts listening for dependency messages (<code>:visit_started</code> and
<code>:visit_ended</code>) and start recording dependencies.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start'>start</span>
  <span class='comment'># Initialize dependency stack. An object will be pushed onto this stack
</span>  <span class='comment'># when it is visited. Therefore, an object on the stack always depends
</span>  <span class='comment'># on all objects pushed above it.
</span>  <span class='ivar'>@stack</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='comment'># Register start of visits
</span>  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_on'>on</span><span class='lparen'>(</span><span class='symbol'>:visit_started</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_obj'>obj</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='symbol'>:dependency_created</span><span class='comma'>,</span> <span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='comma'>,</span> <span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_record_dependency'>record_dependency</span><span class='lparen'>(</span><span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='comma'>,</span> <span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Register end of visits
</span>  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_on'>on</span><span class='lparen'>(</span><span class='symbol'>:visit_ended</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_obj'>obj</span><span class='op'>|</span>
    <span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop-instance_method">
  
    - (<tt>void</tt>) <strong>stop</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Stop listening for dependency messages and stop recording dependencies.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74
75
76
77
78
79
80
81</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stop'>stop</span>
  <span class='comment'># Sanity check
</span>  <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Internal inconsistency: dependency tracker stack not empty at end of compilation</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Unregister
</span>  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span><span class='lparen'>(</span><span class='symbol'>:visit_started</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span>
  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span><span class='lparen'>(</span><span class='symbol'>:visit_ended</span><span class='comma'>,</span>   <span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="store_graph-instance_method">
  
    - (<tt>Object</tt>) <strong>store_graph</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>Use <span class='object_link'><a href="Store.html#store-instance_method" title="Nanoc::Store#store (method)">Store#store</a></span> instead</p>
</div></div>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 161</span>

<span class='kw'>def</span> <span class='id identifier rubyid_store_graph'>store_graph</span>
  <span class='id identifier rubyid_store'>store</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="top-instance_method">
  
    - (<tt>Object</tt>) <strong>top</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns The topmost item on the stack, i.e. the one currently being
compiled</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>The topmost item on the stack, i.e. the one currently being
compiled</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 87</span>

<span class='kw'>def</span> <span class='id identifier rubyid_top'>top</span>
  <span class='ivar'>@stack</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unload-instance_method">
  
    - (<tt>Object</tt>) <strong>unload</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Store.html#unload-instance_method" title="Nanoc::Store#unload (method)">Store#unload</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/dependency_tracker.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unload'>unload</span>
  <span class='ivar'>@graph</span> <span class='op'>=</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>DirectedGraph</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span> <span class='kw'>nil</span> <span class='rbracket'>]</span> <span class='op'>+</span> <span class='ivar'>@objects</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    
<script type="text/javascript">
    var _gaq = _gaq || [];
    var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-15639968-1']);
    _gaq.push(['_setDomainName', 'nanoc.ws']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
     })();
</script>

  </body>
</html>