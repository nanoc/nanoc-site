<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Nanoc::Helpers::Blogging
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!Nanoc/Helpers/Blogging.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Nanoc.html" title="Nanoc (module)">Nanoc</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Helpers.html" title="Nanoc::Helpers (module)">Helpers</a></span></span>
     &raquo; 
    <span class="title">Blogging</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Nanoc::Helpers::Blogging
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="Blogging/AtomFeedBuilder.html" title="Nanoc::Helpers::Blogging::AtomFeedBuilder (class)">AtomFeedBuilder</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/nanoc/helpers/blogging.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Provides functionality for building blogs, such as finding articles and
constructing feeds.</p>

<p>This helper has a few requirements. First, all blog articles should have
the following attributes:</p>

<ul>
  <li>
    <p><code>kind</code> - Set to <code>"article"</code></p>
  </li>
  <li>
    <p><code>created_at</code> - The article’s publication timestamp</p>
  </li>
</ul>

<p>Some functions in this blogging helper, such as the <span class='object_link'><a href="#atom_feed-instance_method" title="Nanoc::Helpers::Blogging#atom_feed (method)">#atom_feed</a></span> function,
require additional attributes to be set; these attributes are described in
the documentation for these functions.</p>

<p>All “time” item attributes, site configuration attributes or method
parameters can either be a <code>Time</code> instance or a string in any format
parseable by <code>Time.parse</code>.</p>

<p>The two main functions are <span class='object_link'><a href="#sorted_articles-instance_method" title="Nanoc::Helpers::Blogging#sorted_articles (method)">#sorted_articles</a></span> and <span class='object_link'><a href="#atom_feed-instance_method" title="Nanoc::Helpers::Blogging#atom_feed (method)">#atom_feed</a></span>.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Blogging/AtomFeedBuilder.html" title="Nanoc::Helpers::Blogging::AtomFeedBuilder (class)">AtomFeedBuilder</a></span>
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#articles-instance_method" title="#articles (instance method)">- (Array) <strong>articles</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns an unsorted list of articles, i.e.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#atom_feed-instance_method" title="#atom_feed (instance method)">- (String) <strong>atom_feed</strong>(params = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a string representing the atom feed containing recent articles, sorted by descending creation date.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#atom_tag_for-instance_method" title="#atom_tag_for (instance method)">- (String) <strong>atom_tag_for</strong>(item) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns an URI containing an unique ID for the given item.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attribute_to_time-instance_method" title="#attribute_to_time (instance method)">- (Time) <strong>attribute_to_time</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Converts the given attribute (which can be a string, a Time or a Date) into a Time.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#feed_url-instance_method" title="#feed_url (instance method)">- (String) <strong>feed_url</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the URL of the feed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sorted_articles-instance_method" title="#sorted_articles (instance method)">- (Array) <strong>sorted_articles</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a sorted list of articles, i.e.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#url_for-instance_method" title="#url_for (instance method)">- (String) <strong>url_for</strong>(item) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the URL for the given item.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="articles-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></tt>) <strong>articles</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns an unsorted list of articles, i.e. items where the <code>kind</code>
attribute is set to <code>"article"</code>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array containing all articles</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/helpers/blogging.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_articles'>articles</span>
  <span class='ivar'>@items</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:kind</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>article</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="atom_feed-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>atom_feed</strong>(params = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a string representing the atom feed containing recent articles,
sorted by descending creation date.</p>

<p>The following attributes must be set on blog articles:</p>

<ul>
  <li>
    <p><code>title</code> - The title of the blog post</p>
  </li>
  <li>
    <p><code>created_at</code> (described above)</p>
  </li>
  <li>
    <p><code>kind</code> (described above) <em>unless</em> you are passing an explicit list of
articles using the <code>:articles</code> parameter</p>
  </li>
</ul>

<p>The following attributes can optionally be set on blog articles to
change the behaviour of the Atom feed:</p>

<ul>
  <li>
    <p><code>excerpt</code> - An excerpt of the article, which is usually only a few
lines long.</p>
  </li>
  <li>
    <p><code>custom_path_in_feed</code> - The path that will be used instead of the
normal path in the feed. This can be useful when including
non-outputted items in a feed; such items could have their custom feed
path set to the blog path instead, for example.</p>
  </li>
  <li>
    <p><code>custom_url_in_feed</code> - The url that will be used instead of the
normal url in the feed (generated from the site’s base url + the item
rep’s path). This can be useful when building a link-blog where the
URL of article is a remote location.</p>
  </li>
  <li>
    <p><code>updated_at</code> - The time when the article was last modified. If this
attribute is not present, the <code>created_at</code> attribute will be used as
the time when the article was last modified.</p>
  </li>
</ul>

<p>The site configuration will need to have the following attributes:</p>

<ul>
  <li><code>base_url</code> - The URL to the site, without trailing slash. For
example, if the site is at “http://example.com/”, the <code>base_url</code>
would be “http://example.com”.</li>
</ul>

<p>The feed item will need to know about the feed title, the feed author
name, and the URI corresponding to the author. These can be specified
using parameters, as attributes in the feed item, or in the site
configuration.</p>

<ul>
  <li>
    <p><code>title</code> - The title of the feed, which is usually also the title of
the blog.</p>
  </li>
  <li>
    <p><code>author_name</code> - The name of the item’s author.</p>
  </li>
  <li>
    <p><code>author_uri</code> - The URI for the item’s author, such as the author’s
web site URL.</p>
  </li>
</ul>

<p>The feed item can have the following optional attributes:</p>

<ul>
  <li><code>feed_url</code> - The custom URL of the feed. This can be useful when the
private feed URL shouldn’t be exposed; for example, when using
FeedBurner this would be set to the public FeedBurner URL.</li>
</ul>

<p>To construct a feed, create a new item and make sure that it is
filtered with <code>:erb</code> or <code>:erubis</code>; it should not be laid out. Ensure
that it is routed to the proper path, e.g. <code>/blog.xml</code>. It may also be
useful to set the <code>is_hidden</code> attribute to true, so that helpers such
as the sitemap helper will ignore the item. The content of the feed
item should be <code>&lt;%= atom_feed %&gt;</code>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Defining compilation and routing rules for a feed item</p>
</div></p>
      
      <pre class="example code"><code>
<span class='id identifier rubyid_compile'>compile</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/blog/feed/</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_filter'>filter</span> <span class='symbol'>:erb</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_route'>route</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/blog/feed/</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/blog.xml</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Limiting the number of items in a feed</p>
</div></p>
      
      <pre class="example code"><code>
&lt;%= atom_feed :limit =&gt; 5 %&gt;</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>params</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:limit</span>
          <span class="type">(<tt>Number</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>5</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>The maximum number of articles to
show</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:articles</span>
          <span class="type">(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>sorted_articles</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>A list of articles to
include in the feed</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:content_proc</span>
          <span class="type">(<tt>Proc</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>-&gt;{ |article|
article.compiled_content(:snapshot =&gt; :pre) }</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>A proc that returns the
content of the given article, which is passed as a parameter. This
function may not return nil.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:excerpt_proc</span>
          <span class="type">(<tt>proc</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>-&gt;{ |article| article[:excerpt] }</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>A proc that returns the excerpt of the given article, passed as a
parameter. This function should return nil if there is no excerpt.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:title</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The feed’s title, if it is not given in
the item attributes.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:author_name</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The name of the feed’s author, if
it is not given in the item attributes.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:author_uri</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The URI of the feed’s author, if it
is not given in the item attributes.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:icon</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The URI of the feed’s icon.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:logo</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The URI of the feed’s logo.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The generated feed content</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/helpers/blogging.rb', line 292</span>

<span class='kw'>def</span> <span class='id identifier rubyid_atom_feed'>atom_feed</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>builder</span><span class='tstring_end'>&#39;</span></span>

  <span class='comment'># Create builder
</span>  <span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'>AtomFeedBuilder</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@site</span><span class='comma'>,</span> <span class='ivar'>@item</span><span class='rparen'>)</span>

  <span class='comment'># Fill builder
</span>  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span>             <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:limit</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>5</span>
  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_relevant_articles'>relevant_articles</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:articles</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_articles'>articles</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_content_proc'>content_proc</span>      <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:content_proc</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_compiled_content'>compiled_content</span><span class='lparen'>(</span><span class='symbol'>:snapshot</span> <span class='op'>=&gt;</span> <span class='symbol'>:pre</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_excerpt_proc'>excerpt_proc</span>      <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:excerpt_proc</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:excerpt</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span>             <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@item</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_author_name'>author_name</span>       <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:author_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@item</span><span class='lbracket'>[</span><span class='symbol'>:author_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:author_name</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_author_uri'>author_uri</span>        <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:author_uri</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@item</span><span class='lbracket'>[</span><span class='symbol'>:author_uri</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:author_uri</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_icon'>icon</span>              <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:icon</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_logo'>logo</span>              <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:logo</span><span class='rbracket'>]</span>

  <span class='comment'># Run
</span>  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_validate'>validate</span>
  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="atom_tag_for-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>atom_tag_for</strong>(item) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns an URI containing an unique ID for the given item. This will be
used in the Atom feed to uniquely identify articles. These IDs are
created using a procedure suggested by Mark Pilgrim and described in his
[“How to make a good ID in Atom” blog post]
(http://web.archive.org/web/20110915110202/http://diveintomark.org/archives/2004/05/28/howto-atom-id).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>item</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The item for which to create an atom tag</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The atom tag for the given item</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


358
359
360
361
362
363
364</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/helpers/blogging.rb', line 358</span>

<span class='kw'>def</span> <span class='id identifier rubyid_atom_tag_for'>atom_tag_for</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_base_dir'>base_dir</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^.+?://([^/]+)(.*)$</span><span class='regexp_end'>}</span></span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:base_url</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='int'>2</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_formatted_date'>formatted_date</span> <span class='op'>=</span> <span class='id identifier rubyid_attribute_to_time'>attribute_to_time</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:created_at</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_iso8601_date'>to_iso8601_date</span>

  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tag:</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_hostname'>hostname</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_formatted_date'>formatted_date</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_base_dir'>base_dir</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>||</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_identifier'>identifier</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="attribute_to_time-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Time.html" title="Time (class)">Time</a></span></tt>) <strong>attribute_to_time</strong>(time) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Converts the given attribute (which can be a string, a Time or a Date)
into a Time.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>time</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="../../Time.html" title="Time (class)">Time</a></span></tt>, <tt><span class='object_link'><a href="../../Date.html" title="Date (class)">Date</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Something that contains time
information but is not necessarily a Time instance yet</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Time.html" title="Time (class)">Time</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The Time instance corresponding to the given input</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


373
374
375
376
377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/helpers/blogging.rb', line 373</span>

<span class='kw'>def</span> <span class='id identifier rubyid_attribute_to_time'>attribute_to_time</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_local'>local</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_month'>month</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_time'>time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="feed_url-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>feed_url</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the URL of the feed. It will return the custom feed URL if set,
or otherwise the normal feed URL.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The URL of the feed</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343
344
345
346
347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/helpers/blogging.rb', line 340</span>

<span class='kw'>def</span> <span class='id identifier rubyid_feed_url'>feed_url</span>
  <span class='comment'># Check attributes
</span>  <span class='kw'>if</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:base_url</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Errors</span><span class='op'>::</span><span class='const'>GenericTrivial</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cannot build Atom feed: site configuration has no base_url</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@item</span><span class='lbracket'>[</span><span class='symbol'>:feed_url</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:base_url</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='ivar'>@item</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sorted_articles-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></tt>) <strong>sorted_articles</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a sorted list of articles, i.e. items where the <code>kind</code>
attribute is set to <code>"article"</code>. Articles are sorted by descending
creation date, so newer articles appear before older articles.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A sorted array containing all articles</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/helpers/blogging.rb', line 39</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sorted_articles'>sorted_articles</span>
  <span class='id identifier rubyid_articles'>articles</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
    <span class='id identifier rubyid_attribute_to_time'>attribute_to_time</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:created_at</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="url_for-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>url_for</strong>(item) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the URL for the given item. It will return the URL containing
the custom path in the feed if possible, otherwise the normal path.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>item</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The item for which to fetch the URL.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The URL of the given item</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


320
321
322
323
324
325
326
327
328
329
330
331
332
333
334</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/helpers/blogging.rb', line 320</span>

<span class='kw'>def</span> <span class='id identifier rubyid_url_for'>url_for</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='comment'># Check attributes
</span>  <span class='kw'>if</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:base_url</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Errors</span><span class='op'>::</span><span class='const'>GenericTrivial</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cannot build Atom feed: site configuration has no base_url</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Build URL
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:custom_url_in_feed</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:custom_url_in_feed</span><span class='rbracket'>]</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:custom_path_in_feed</span><span class='rbracket'>]</span>
    <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:base_url</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:custom_path_in_feed</span><span class='rbracket'>]</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
    <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:base_url</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    
<script type="text/javascript">
    var _gaq = _gaq || [];
    var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-15639968-1']);
    _gaq.push(['_setDomainName', 'nanoc.ws']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
     })();
</script>

  </body>
</html>