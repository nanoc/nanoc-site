<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Nanoc::Compiler
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Nanoc/Compiler.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Nanoc.html" title="Nanoc (module)">Nanoc</a></span></span>
     &raquo; 
    <span class="title">Compiler</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Nanoc::Compiler
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Nanoc::Compiler</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extended by:</dt>
      <dd class="r2"><span class='object_link'><a href="Memoization.html" title="Nanoc::Memoization (module)">Memoization</a></span></dd>
      
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/nanoc/base/compilation/compiler.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Responsible for compiling a site’s item representations.</p>

<p>The compilation process makes use of notifications (see
<span class='object_link'><a href="NotificationCenter.html" title="Nanoc::NotificationCenter (class)">NotificationCenter</a></span>) to track dependencies between items,
layouts, etc. The following notifications are used:</p>

<ul>
  <li>
    <p><code>compilation_started</code> — indicates that the compiler has started
compiling this item representation. Has one argument: the item
representation itself. Only one item can be compiled at a given moment;
therefore, it is not possible to get two consecutive
<code>compilation_started</code> notifications without also getting a
<code>compilation_ended</code> notification in between them.</p>
  </li>
  <li>
    <p><code>compilation_ended</code> — indicates that the compiler has finished compiling
this item representation (either successfully or with failure). Has one
argument: the item representation itself.</p>
  </li>
  <li>
    <p><code>visit_started</code> — indicates that the compiler requires content or
attributes from the item representation that will be visited. Has one
argument: the visited item identifier. This notification is used to
track dependencies of items on other items; a <code>visit_started</code> event
followed by another <code>visit_started</code> event indicates that the item
corresponding to the former event will depend on the item from the
latter event.</p>
  </li>
  <li>
    <p><code>visit_ended</code> — indicates that the compiler has finished visiting the
item representation and that the requested attributes or content have
been fetched (either successfully or with failure)</p>
  </li>
  <li>
    <p><code>processing_started</code> — indicates that the compiler has started
processing the specified object, which can be an item representation
(when it is compiled) or a layout (when it is used to lay out an item
representation or when it is used as a partial)</p>
  </li>
  <li>
    <p><code>processing_ended</code> — indicates that the compiler has finished processing
the specified object.</p>
  </li>
</ul>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Accessors <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#site-instance_method" title="#site (instance method)">- (Nanoc::Site) <strong>site</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The site this compiler belongs to.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#stack-instance_method" title="#stack (instance method)">- (Array) <strong>stack</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The compilation stack.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Public instance methods
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Compiler) <strong>initialize</strong>(site) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new compiler fo the given site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (void) <strong>run</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Compiles the site and writes out the compiled item representations.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Private instance methods
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assigns_for-instance_method" title="#assigns_for (instance method)">- (Hash) <strong>assigns_for</strong>(rep) </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>The assigns that should be used in the next filter/layout operation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_reps-instance_method" title="#build_reps (instance method)">- (Object) <strong>build_reps</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Creates the representations of all items as defined by the compilation rules.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dependency_tracker-instance_method" title="#dependency_tracker (instance method)">- (Nanoc::DependencyTracker) <strong>dependency_tracker</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Returns the dependency tracker for this site, creating it first if it does not yet exist.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load-instance_method" title="#load (instance method)">- (void) <strong>load</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Load the helper data that is used for compiling the site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#objects-instance_method" title="#objects (instance method)">- (Object) <strong>objects</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Returns all objects managed by the site (items, layouts, code snippets, site configuration and the rules).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#outdatedness_checker-instance_method" title="#outdatedness_checker (instance method)">- (Nanoc::OutdatednessChecker) <strong>outdatedness_checker</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The outdatedness checker.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#preprocess-instance_method" title="#preprocess (instance method)">- (Object) <strong>preprocess</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Runs the preprocessors.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#route_reps-instance_method" title="#route_reps (instance method)">- (Object) <strong>route_reps</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Determines the paths of all item representations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rules_collection-instance_method" title="#rules_collection (instance method)">- (Nanoc::RulesCollection) <strong>rules_collection</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The collection of rules to be used for compiling this site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#store-instance_method" title="#store (instance method)">- (void) <strong>store</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Store the modified helper data used for compiling the site.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unload-instance_method" title="#unload (instance method)">- (void) <strong>unload</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Undoes the effects of <span class='object_link'><a href="#load-instance_method" title="Nanoc::Compiler#load (method)">#load</a></span>.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Memoization.html" title="Nanoc::Memoization (module)">Memoization</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Memoization.html#memoize-instance_method" title="Nanoc::Memoization#memoize (method)">memoize</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Nanoc::Compiler (class)">Compiler</a></span></tt>) <strong>initialize</strong>(site) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new compiler fo the given site</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>site</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Site.html" title="Nanoc::Site (class)">Nanoc::Site</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The site this compiler belongs to</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 60</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_site'>site</span><span class='rparen'>)</span>
  <span class='ivar'>@site</span> <span class='op'>=</span> <span class='id identifier rubyid_site'>site</span>

  <span class='ivar'>@stack</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="site-instance_method">
  
    - (<tt><span class='object_link'><a href="Site.html" title="Nanoc::Site (class)">Nanoc::Site</a></span></tt>) <strong>site</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The site this compiler belongs to</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Site.html" title="Nanoc::Site (class)">Nanoc::Site</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The site this compiler belongs to</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_site'>site</span>
  <span class='ivar'>@site</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="stack-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>) <strong>stack</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The compilation stack. When the compiler begins compiling a rep or a
layout, it will be placed on the stack; when it is done compiling the
rep or layout, it will be removed from the stack.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The compilation stack</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 53</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stack'>stack</span>
  <span class='ivar'>@stack</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="assigns_for-instance_method">
  
    - (<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>) <strong>assigns_for</strong>(rep) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns The assigns that should be used in the next filter/layout
operation</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rep</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ItemRep.html" title="Nanoc::ItemRep (class)">Nanoc::ItemRep</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The item representation for which the
assigns should be fetched</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The assigns that should be used in the next filter/layout
operation</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 269</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assigns_for'>assigns_for</span><span class='lparen'>(</span><span class='id identifier rubyid_rep'>rep</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_binary?'>binary?</span>
    <span class='id identifier rubyid_content_or_filename_assigns'>content_or_filename_assigns</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>filename:</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_temporary_filenames'>temporary_filenames</span><span class='lbracket'>[</span><span class='symbol'>:last</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_content_or_filename_assigns'>content_or_filename_assigns</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>content:</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_content'>content</span><span class='lbracket'>[</span><span class='symbol'>:last</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_content_or_filename_assigns'>content_or_filename_assigns</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='lbrace'>{</span>
    <span class='label'>item:</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span>
    <span class='label'>rep:</span> <span class='id identifier rubyid_rep'>rep</span><span class='comma'>,</span>
    <span class='label'>item_rep:</span> <span class='id identifier rubyid_rep'>rep</span><span class='comma'>,</span>
    <span class='label'>items:</span> <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_items'>items</span><span class='comma'>,</span>
    <span class='label'>layouts:</span> <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_layouts'>layouts</span><span class='comma'>,</span>
    <span class='label'>config:</span> <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='comma'>,</span>
    <span class='label'>site:</span> <span class='id identifier rubyid_site'>site</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_reps-instance_method">
  
    - (<tt>Object</tt>) <strong>build_reps</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Creates the representations of all items as defined by the compilation
rules.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216
217
218
219
220
221
222
223
224
225
226</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 214</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_reps'>build_reps</span>
  <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
    <span class='comment'># Find matching rules
</span>    <span class='id identifier rubyid_matching_rules'>matching_rules</span> <span class='op'>=</span> <span class='id identifier rubyid_rules_collection'>rules_collection</span><span class='period'>.</span><span class='id identifier rubyid_item_compilation_rules_for'>item_compilation_rules_for</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Errors</span><span class='op'>::</span><span class='const'>NoMatchingCompilationRuleFound</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_matching_rules'>matching_rules</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

    <span class='comment'># Create reps
</span>    <span class='id identifier rubyid_rep_names'>rep_names</span> <span class='op'>=</span> <span class='id identifier rubyid_matching_rules'>matching_rules</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:rep_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
    <span class='id identifier rubyid_rep_names'>rep_names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rep_name'>rep_name</span><span class='op'>|</span>
      <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_reps'>reps</span> <span class='op'>&lt;&lt;</span> <span class='const'>ItemRep</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='id identifier rubyid_rep_name'>rep_name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dependency_tracker-instance_method">
  
    - (<tt><span class='object_link'><a href="DependencyTracker.html" title="Nanoc::DependencyTracker (class)">Nanoc::DependencyTracker</a></span></tt>) <strong>dependency_tracker</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns the dependency tracker for this site, creating it first if it
does not yet exist.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="DependencyTracker.html" title="Nanoc::DependencyTracker (class)">Nanoc::DependencyTracker</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The dependency tracker for this site</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 185</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dependency_tracker'>dependency_tracker</span>
  <span class='id identifier rubyid_dt'>dt</span> <span class='op'>=</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>DependencyTracker</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_items'>items</span> <span class='op'>+</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_layouts'>layouts</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dt'>dt</span><span class='period'>.</span><span class='id identifier rubyid_compiler'>compiler</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='id identifier rubyid_dt'>dt</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load-instance_method">
  
    - (<tt>void</tt>) <strong>load</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Load the helper data that is used for compiling the site.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load'>load</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@loaded</span> <span class='op'>||</span> <span class='ivar'>@loading</span>
  <span class='ivar'>@loading</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='comment'># Load site if necessary
</span>  <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span>

  <span class='comment'># Preprocess
</span>  <span class='id identifier rubyid_rules_collection'>rules_collection</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span>
  <span class='id identifier rubyid_preprocess'>preprocess</span>
  <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_setup_child_parent_links'>setup_child_parent_links</span>
  <span class='id identifier rubyid_build_reps'>build_reps</span>
  <span class='id identifier rubyid_route_reps'>route_reps</span>

  <span class='comment'># Load auxiliary stores
</span>  <span class='id identifier rubyid_stores'>stores</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:load</span><span class='rparen'>)</span>

  <span class='ivar'>@loaded</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_unload'>unload</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_e'>e</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@loading</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="objects-instance_method">
  
    - (<tt>Object</tt>) <strong>objects</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Returns all objects managed by the site (items, layouts, code snippets,
site configuration and the rules).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


205
206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 205</span>

<span class='kw'>def</span> <span class='id identifier rubyid_objects'>objects</span>
  <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_items'>items</span> <span class='op'>+</span> <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_layouts'>layouts</span> <span class='op'>+</span> <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_code_snippets'>code_snippets</span> <span class='op'>+</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='comma'>,</span> <span class='id identifier rubyid_rules_collection'>rules_collection</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="outdatedness_checker-instance_method">
  
    - (<tt><span class='object_link'><a href="OutdatednessChecker.html" title="Nanoc::OutdatednessChecker (class)">Nanoc::OutdatednessChecker</a></span></tt>) <strong>outdatedness_checker</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The outdatedness checker</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="OutdatednessChecker.html" title="Nanoc::OutdatednessChecker (class)">Nanoc::OutdatednessChecker</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The outdatedness checker</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


288
289
290
291
292
293</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 288</span>

<span class='kw'>def</span> <span class='id identifier rubyid_outdatedness_checker'>outdatedness_checker</span>
  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>OutdatednessChecker</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='label'>site:</span> <span class='ivar'>@site</span><span class='comma'>,</span>
    <span class='label'>checksum_store:</span> <span class='id identifier rubyid_checksum_store'>checksum_store</span><span class='comma'>,</span>
    <span class='label'>dependency_tracker:</span> <span class='id identifier rubyid_dependency_tracker'>dependency_tracker</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="preprocess-instance_method">
  
    - (<tt>Object</tt>) <strong>preprocess</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Runs the preprocessors.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 195</span>

<span class='kw'>def</span> <span class='id identifier rubyid_preprocess'>preprocess</span>
  <span class='id identifier rubyid_rules_collection'>rules_collection</span><span class='period'>.</span><span class='id identifier rubyid_preprocessors'>preprocessors</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_preprocessor'>preprocessor</span><span class='op'>|</span>
    <span class='id identifier rubyid_preprocessor_context'>preprocessor_context</span><span class='period'>.</span><span class='id identifier rubyid_instance_eval'>instance_eval</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_preprocessor'>preprocessor</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="route_reps-instance_method">
  
    - (<tt>Object</tt>) <strong>route_reps</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Determines the paths of all item representations.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 231</span>

<span class='kw'>def</span> <span class='id identifier rubyid_route_reps'>route_reps</span>
  <span class='id identifier rubyid_reps'>reps</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rep'>rep</span><span class='op'>|</span>
    <span class='comment'># Find matching rules
</span>    <span class='id identifier rubyid_rules'>rules</span> <span class='op'>=</span> <span class='id identifier rubyid_rules_collection'>rules_collection</span><span class='period'>.</span><span class='id identifier rubyid_routing_rules_for'>routing_rules_for</span><span class='lparen'>(</span><span class='id identifier rubyid_rep'>rep</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Errors</span><span class='op'>::</span><span class='const'>NoMatchingRoutingRuleFound</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_rep'>rep</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_rules'>rules</span><span class='lbracket'>[</span><span class='symbol'>:last</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_snapshot'>snapshot</span><span class='comma'>,</span> <span class='id identifier rubyid_rule'>rule</span><span class='op'>|</span>
      <span class='comment'># Get basic path by applying matching rule
</span>      <span class='id identifier rubyid_basic_path'>basic_path</span> <span class='op'>=</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_apply_to'>apply_to</span><span class='lparen'>(</span><span class='id identifier rubyid_rep'>rep</span><span class='comma'>,</span> <span class='label'>compiler:</span> <span class='kw'>self</span><span class='rparen'>)</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_basic_path'>basic_path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_basic_path'>basic_path</span> <span class='op'>!~</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^/</span><span class='regexp_end'>}</span></span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The path returned for the </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> item representation, “</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_basic_path'>basic_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>”, does not start with a slash. Please ensure that all routing rules return a path that starts with a slash.</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>

      <span class='comment'># Get raw path by prepending output directory
</span>      <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_raw_paths'>raw_paths</span><span class='lbracket'>[</span><span class='id identifier rubyid_snapshot'>snapshot</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:output_dir</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_basic_path'>basic_path</span>

      <span class='comment'># Get normal path by stripping index filename
</span>      <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_paths'>paths</span><span class='lbracket'>[</span><span class='id identifier rubyid_snapshot'>snapshot</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_basic_path'>basic_path</span>
      <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:index_filenames</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index_filename'>index_filename</span><span class='op'>|</span>
        <span class='id identifier rubyid_rep_path_ending'>rep_path_ending</span> <span class='op'>=</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_paths'>paths</span><span class='lbracket'>[</span><span class='id identifier rubyid_snapshot'>snapshot</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='op'>-</span><span class='id identifier rubyid_index_filename'>index_filename</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_rep_path_ending'>rep_path_ending</span> <span class='op'>==</span> <span class='id identifier rubyid_index_filename'>index_filename</span>

        <span class='comment'># Strip and stop
</span>        <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_paths'>paths</span><span class='lbracket'>[</span><span class='id identifier rubyid_snapshot'>snapshot</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_rep'>rep</span><span class='period'>.</span><span class='id identifier rubyid_paths'>paths</span><span class='lbracket'>[</span><span class='id identifier rubyid_snapshot'>snapshot</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='id identifier rubyid_index_filename'>index_filename</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
        <span class='kw'>break</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rules_collection-instance_method">
  
    - (<tt><span class='object_link'><a href="RulesCollection.html" title="Nanoc::RulesCollection (class)">Nanoc::RulesCollection</a></span></tt>) <strong>rules_collection</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The collection of rules to be used
for compiling this site</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RulesCollection.html" title="Nanoc::RulesCollection (class)">Nanoc::RulesCollection</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The collection of rules to be used
for compiling this site</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rules_collection'>rules_collection</span>
  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>RulesCollection</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run-instance_method">
  
    - (<tt>void</tt>) <strong>run</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Compiles the site and writes out the compiled item representations.</p>

<p>Previous versions of nanoc (&lt; 3.2) allowed passing items to compile, and
had a “force” option to make the compiler recompile all pages, even
when not outdated. These arguments and options are, as of nanoc 3.2, no
longer used, and will simply be ignored when passed to <span class='object_link'><a href="#run-instance_method" title="Nanoc::Compiler#run (method)">#run</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>


  </div>
</div>
<div class="tags">
  

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 75</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid__args'>_args</span><span class='rparen'>)</span>
  <span class='comment'># Create output directory if necessary
</span>  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:output_dir</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='comment'># Compile reps
</span>  <span class='id identifier rubyid_load'>load</span>
  <span class='ivar'>@site</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>

  <span class='comment'># Determine which reps need to be recompiled
</span>  <span class='id identifier rubyid_forget_dependencies_if_outdated'>forget_dependencies_if_outdated</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_dependency_tracker'>dependency_tracker</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span>
  <span class='id identifier rubyid_compile_reps'>compile_reps</span><span class='lparen'>(</span><span class='id identifier rubyid_reps'>reps</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dependency_tracker'>dependency_tracker</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span>
  <span class='id identifier rubyid_store'>store</span>
<span class='kw'>ensure</span>
  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>TempFilenameFactory</span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_cleanup'>cleanup</span><span class='lparen'>(</span>
    <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Filter</span><span class='op'>::</span><span class='const'>TMP_BINARY_ITEMS_DIR</span><span class='rparen'>)</span>
  <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>TempFilenameFactory</span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_cleanup'>cleanup</span><span class='lparen'>(</span>
    <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>ItemRep</span><span class='op'>::</span><span class='const'>TMP_TEXT_ITEMS_DIR</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="store-instance_method">
  
    - (<tt>void</tt>) <strong>store</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Store the modified helper data used for compiling the site.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169
170
171
172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 164</span>

<span class='kw'>def</span> <span class='id identifier rubyid_store'>store</span>
  <span class='comment'># Calculate rule memory
</span>  <span class='lparen'>(</span><span class='id identifier rubyid_reps'>reps</span> <span class='op'>+</span> <span class='id identifier rubyid_layouts'>layouts</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_obj'>obj</span><span class='op'>|</span>
    <span class='id identifier rubyid_rule_memory_store'>rule_memory_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_obj'>obj</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_rule_memory_calculator'>rule_memory_calculator</span><span class='lbracket'>[</span><span class='id identifier rubyid_obj'>obj</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='comment'># Calculate checksums
</span>  <span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_obj'>obj</span><span class='op'>|</span>
    <span class='id identifier rubyid_checksum_store'>checksum_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_obj'>obj</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_obj'>obj</span><span class='period'>.</span><span class='id identifier rubyid_checksum'>checksum</span>
  <span class='kw'>end</span>

  <span class='comment'># Store
</span>  <span class='id identifier rubyid_stores'>stores</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:store</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unload-instance_method">
  
    - (<tt>void</tt>) <strong>unload</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Undoes the effects of <span class='object_link'><a href="#load-instance_method" title="Nanoc::Compiler#load (method)">#load</a></span>. Used when <span class='object_link'><a href="#load-instance_method" title="Nanoc::Compiler#load (method)">#load</a></span> raises an exception.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/compiler.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unload'>unload</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@unloading</span>
  <span class='ivar'>@unloading</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='id identifier rubyid_stores'>stores</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:unload</span><span class='rparen'>)</span>

  <span class='ivar'>@stack</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_reps'>reps</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_teardown_child_parent_links'>teardown_child_parent_links</span>
  <span class='id identifier rubyid_rules_collection'>rules_collection</span><span class='period'>.</span><span class='id identifier rubyid_unload'>unload</span>

  <span class='id identifier rubyid_site'>site</span><span class='period'>.</span><span class='id identifier rubyid_unload'>unload</span>

  <span class='ivar'>@loaded</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@unloading</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    
<script type="text/javascript">
    var _gaq = _gaq || [];
    var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-15639968-1']);
    _gaq.push(['_setDomainName', 'nanoc.ws']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
     })();
</script>

  </body>
</html>